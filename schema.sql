CREATE TABLE item (
  id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  publish_date DATE NOT NULL,
  archived BOOLEAN NOT NULL,
  genre VARCHAR(100),
  author VARCHAR(100),
  source VARCHAR(100),
  label VARCHAR(100),
  book_id INT,
  FOREIGN KEY (book_id) REFERENCES book (id)
);

CREATE TABLE book (
  id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY ,
  publisher VARCHAR(255) NOT NULL,
  cover_state VARCHAR(25) NOT NULL,
  publish_date DATE NOT NULL,
  archived BOOLEAN NOT NULL,
  item_id INT NOT NULL
);

CREATE TABLE label (
  id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  title VARCHAR(255) NOT NULL,
  color VARCHAR(100) NOT NULL,
  archived BOOLEAN NOT NULL,
  book_id INT NOT NULL,
  item_id INT NOT NULL
);

ALTER TABLE book ADD FOREIGN KEY (item_id) REFERENCES item (id);
ALTER TABLE label ADD FOREIGN KEY (item_id) REFERENCES item (id);
ALTER TABLE label ADD FOREIGN KEY (book_id) REFERENCES book (id);
